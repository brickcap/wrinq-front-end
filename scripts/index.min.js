var helpers={id:function(e){return document.getElementById(e)},show:function(e){e.style.display="block"},hide:function(e){e.style.display="none"},clearHtml:function(e){e.innerHTML=""},serializeTextFields:function(e){var t=0,n=e.elements.length-1,r="";for(t;t<n;t++){var i=e.elements[t].name,s=e.elements[t].value,o=i+"="+s+"&";r+=encodeURI(o)}return r},ajax:function(e){var t=new XMLHttpRequest;t.open(e.method,e.url,!0),t.onreadystatechange=function(){if(t.status!=200||t.readyState!=4)return;e.callback(t.responseText)},t.send(e.data)}},domElements={signUpForm:'<form  id ="signUpForm" onsubmit="submitAjax(event,this)"><p><input type="text" name="username" value="" placeholder= "username" onfocusout="checkUser(this)" onfocus = "clearMessages()" required/></p><p><input type="password" name="password" value="" placeholder="password"  required/></p><p><input type="submit" id="submitButton"  value="sign up"/></p></form><p id ="message"></p><p><span class ="underline-spans" onclick = "loginClick()">or login<span></p>',loginForm:'<form  method="POST" id="loginForm" onsubmit="submitAjax(event,this)"><p><input type="text" name="username" value="" placeholder="username"  required/></p><p><input type="password" name="password" value="" placeholder="password"  required/></p><p><input type="submit" id="submitButton" name="" value="login"/></p></form><p id= "message"></p><p ><span class ="underline-spans" onclick ="signUpClick()">or sign-up<span></p>'},logincallback=function(e){},createcallback=function(e){},signUp=helpers.id("signup"),login=helpers.id("login"),splashDiv=helpers.id("splash"),formDiv=helpers.id("formDiv"),signUpClick=function(){helpers.hide(splashDiv),formDiv.innerHTML=domElements.signUpForm},loginClick=function(){helpers.hide(splashDiv),formDiv.innerHTML=domElements.loginForm},submitAjax=function(e,t){e.preventDefault();var n=helpers.serializeTextFields(t),r={url:t.id==="loginForm"?"/login":"/createUser",data:n,method:"POST",callback:function(e){console.log(e)}};helpers.ajax(r)},checkUser=function(e){var t=helpers.id("submitButton"),n=helpers.id("message"),r={url:'/checkuser?name="'+e.value+'"',method:"GET",callback:function(e){if(JSON.parse(e).available)return;t.disabled=!0,n.innerHTML="The username is taken"}};helpers.ajax(r)},clearMessages=function(){var e=helpers.id("submitButton"),t=helpers.id("message");t.innerHTML="",e.disabled=!1}